
#include "Noise2D.smd"
#include "Time.smd"

in float fogVisibility;
in float fog_grad;

float fogCalculated;

void initFog(vec2 wPos){
	if(fogVisibility<1/255.0)discard;
	
	float n=(1+snoise(wPos/200+worldTime/10))/2;
	fogCalculated=fogVisibility-n/8;
	if(fogCalculated<0)fogCalculated=0;
}

vec4 applyFog(vec4 initalColor, vec3 skyColor){
	return vec4(mix(skyColor,initalColor.rgb, fogCalculated),initalColor.a);
}